import{c as p,j as e,f as d,d as f,e as j,h as g}from"./index-76afb0b9.js";import{L as h}from"./router-eb311532.js";import{u,a as v,A as b,M as w,P as N}from"./store-2a85050e.js";import{r as y}from"./vendor-729d4b68.js";import{l as k}from"./stripe-bf288d68.js";import{L as C}from"./LoadingSpinner-e090c468.js";import{m as n}from"./animations-65a2e7d1.js";const S=p("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),T=p("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),_=p("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),E=p("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),L=p("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);let m;const M=()=>(m||(m=k("pk_test_your_stripe_publishable_key_here")),m),q=async a=>{try{const r=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a.map(t=>({price_data:{currency:"usd",product_data:{name:t.product.name,description:t.product.description,images:[t.product.image],metadata:{product_id:t.product.id,category:t.product.category}},unit_amount:Math.round(t.product.price*100)},quantity:t.quantity})),success_url:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${window.location.origin}/cart`,metadata:{order_type:"vape_products"}})});if(!r.ok)throw new Error("Failed to create checkout session");const{sessionId:o}=await r.json();return o}catch(r){throw console.error("Error creating checkout session:",r),r}},P=async a=>{try{const r=await M();if(!r){console.log("Demo mode: Simulating Stripe checkout with items:",a);const c=a.reduce((l,x)=>l+x.product.price*x.quantity,0);return await new Promise(l=>setTimeout(l,2e3)),alert(`Demo Checkout Complete!
Total: $${c.toFixed(2)}

In production, this would redirect to Stripe Checkout.`),{success:!0,demo:!0}}const o=await q(a),t=await r.redirectToCheckout({sessionId:o});if(t.error)throw new Error(t.error.message);return{success:!0,demo:!1}}catch(r){throw console.error("Error redirecting to checkout:",r),r}},F=()=>{const[a,r]=y.useState(!1),[o,t]=y.useState(null),c=u(i=>i.cart),l=u(i=>i.clearCart),x=v(i=>i.setCartDrawerOpen),s=async()=>{if(c.items.length!==0){r(!0),t(null);try{const i=await P(c.items);i.success&&i.demo&&(l(),x(!1))}catch(i){console.error("Checkout error:",i),t("Failed to initiate checkout. Please try again.")}finally{r(!1)}}};return c.items.length===0?null:e.jsxs("div",{className:"space-y-3",children:[o&&e.jsxs(n.div,{className:"flex items-center space-x-2 p-3 bg-red-500/20 border border-red-500/50 rounded-lg",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(S,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-400 text-sm font-vt323",children:o})]}),e.jsx(n.button,{onClick:s,disabled:a||c.items.length===0,className:`w-full neon-button neon-button-pink py-4 flex items-center justify-center space-x-3 ${a?"opacity-75 cursor-not-allowed":""}`,whileHover:a?{}:{scale:1.02},whileTap:a?{}:{scale:.98},children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"sm",color:"neon-pink"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Secure Checkout"})]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400 text-xs",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsx("span",{className:"font-vt323",children:"Secured by Stripe â€¢ SSL Encrypted"})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-400 text-xs font-vt323",children:"By proceeding, you confirm you are 21+ years old"})})]})},V=()=>{const{cart:a,updateCartQuantity:r,removeFromCart:o}=u(),t=a.total,c=j(t),l=f(t),x=g(t);return a.items.length===0?e.jsx(n.div,{className:"min-h-screen bg-vapor-black flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsx(n.div,{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-vapor-dark-gray flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:e.jsx(E,{className:"w-12 h-12 text-gray-400"})}),e.jsx(n.h1,{className:"font-orbitron font-bold text-3xl text-white mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:"Your Cart is Empty"}),e.jsx(n.p,{className:"text-gray-300 font-vt323 text-lg mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Looks like you haven't added any products to your cart yet. Start exploring our premium vaping collection!"}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(h,{to:"/products",children:e.jsx(n.button,{className:"neon-button neon-button-pink px-8 py-4 text-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Start Shopping"})})})]})}):e.jsx(n.div,{className:"min-h-screen bg-vapor-black pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(n.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs(h,{to:"/products",className:"flex items-center space-x-2 text-neon-cyan hover:text-white transition-colors duration-300 font-vt323 text-lg mb-6",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Continue Shopping"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"font-orbitron font-bold text-3xl sm:text-4xl gradient-text",children:"Shopping Cart"}),e.jsxs("div",{className:"bg-neon-pink text-vapor-black px-3 py-1 rounded-full text-sm font-orbitron font-bold",children:[a.itemCount," ",a.itemCount===1?"item":"items"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n.div,{className:"space-y-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},children:a.items.map((s,i)=>e.jsx(n.div,{className:"neon-card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(h,{to:`/products/${s.product.id}`,children:e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden bg-vapor-dark-gray hover:scale-105 transition-transform duration-300",children:e.jsx("img",{src:s.product.image,alt:s.product.name,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(h,{to:`/products/${s.product.id}`,className:"block hover:text-neon-cyan transition-colors duration-300",children:e.jsx("h3",{className:"font-orbitron font-bold text-lg text-white mb-1 truncate",children:s.product.name})}),e.jsx("p",{className:"text-gray-400 font-vt323 text-sm mb-2 line-clamp-2",children:s.product.description}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-neon-purple text-xs font-orbitron font-medium uppercase",children:s.product.category})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-orbitron font-bold text-xl gradient-text mb-2",children:d(s.product.price)}),e.jsx("div",{className:"text-gray-400 font-vt323 text-sm",children:"each"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(n.button,{onClick:()=>r(s.id,s.quantity-1),className:"w-8 h-8 rounded-full bg-vapor-light-gray hover:bg-neon-cyan hover:text-vapor-black transition-colors duration-300 flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-orbitron font-bold text-white",children:s.quantity}),e.jsx(n.button,{onClick:()=>r(s.id,s.quantity+1),className:"w-8 h-8 rounded-full bg-vapor-light-gray hover:bg-neon-cyan hover:text-vapor-black transition-colors duration-300 flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(N,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-right min-w-[80px]",children:e.jsx("div",{className:"font-orbitron font-bold text-xl text-white",children:d(s.product.price*s.quantity)})}),e.jsx(n.button,{onClick:()=>o(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors duration-300",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(L,{className:"w-5 h-5"})})]})},s.id))})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(n.div,{className:"neon-card p-6 sticky top-24",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8},children:[e.jsx("h2",{className:"font-orbitron font-bold text-xl text-white mb-6",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-vt323 text-lg text-gray-300",children:"Subtotal:"}),e.jsx("span",{className:"font-orbitron font-medium text-white",children:d(t)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-vt323 text-lg text-gray-300",children:"Tax:"}),e.jsx("span",{className:"font-orbitron font-medium text-white",children:d(c)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-vt323 text-lg text-gray-300",children:"Shipping:"}),e.jsx("span",{className:"font-orbitron font-medium text-white",children:l===0?e.jsx("span",{className:"text-neon-teal",children:"FREE"}):d(l)})]}),t<50&&e.jsx("div",{className:"text-center p-3 bg-neon-teal/10 border border-neon-teal/30 rounded-lg",children:e.jsxs("p",{className:"text-neon-teal text-sm font-vt323",children:["Add ",d(50-t)," more for free shipping!"]})}),e.jsx("div",{className:"border-t border-vapor-light-gray pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-orbitron font-bold text-xl text-white",children:"Total:"}),e.jsx("span",{className:"font-orbitron font-bold text-2xl gradient-text",children:d(x)})]})})]}),e.jsx(F,{}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-400 text-sm font-vt323",children:"Must be 21+ to purchase. Secure checkout powered by Stripe."})})]})})]})]})})};export{V as default};
//# sourceMappingURL=Cart-7ed33ec5.js.map
